<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legal Text Simplifier - LEGALOGIC</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .simplify-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .text-areas {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .text-areas {
                grid-template-columns: 1fr;
            }
        }
        
        .text-area-group {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: monospace;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
        }
        
        .stats-card {
            background: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .stat-item {
            display: inline-block;
            margin-right: 20px;
            padding: 8px 12px;
            background: white;
            border-radius: 5px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .improvement {
            color: #28a745;
            font-weight: bold;
        }
        
        .reduction {
            color: #dc3545;
            font-weight: bold;
        }
        
        .ai-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 30px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #007bff;
        }
        
        input:checked + .slider:before {
            transform: translateX(30px);
        }
        
        .examples {
            margin-top: 30px;
            color: #555;
            font-size: 14px;
            line-height: 1.5;
            text-align: center;
        }
        
        .example-card {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            cursor: pointer;
        }
        
        .example-card:hover {
            background: #f8f9fa;
        }
    </style>
</head>
<body>
    {% include 'navigation.html' %}

    <div class="simplify-container">
        <h1>Legal Text Simplifier</h1>
        <p>Convert complex legal jargon into simple, understandable language</p>

        <form method="POST">
            <div class="ai-toggle">
                <label>AI-Powered Simplification:</label>
                <label class="switch">
                    <input type="checkbox" name="use_ai" checked>
                    <span class="slider"></span>
                </label>
                <span>Enabled</span>
            </div>

            <div class="text-areas">
                <div class="text-area-group">
                    <h3>Original Legal Text</h3>
                    <textarea name="original_text" placeholder="Paste your legal text here..." required>{{ original_text }}</textarea>
                </div>
                
                <div class="text-area-group">
                    <h3>Simplified Text</h3>
                    <textarea readonly placeholder="Simplified text will appear here...">{{ simplified_text }}</textarea>
                </div>
            </div>

            <center><button type="submit" class="btn btn-primary">Simplify Text</button></center>
        </form>

        {% if error %}
            <div class="alert alert-error" style="margin-top: 20px;">
                {{ error }}
            </div>
        {% endif %}

        {% if stats %}
            <div class="stats-card">
                <h4>Simplification Results</h4>
                <div class="stat-item">
                    <strong>Processing Time:</strong> {{ processing_time }}s
                </div>
                <div class="stat-item">
                    <strong>Word Reduction:</strong> <span class="reduction">{{ stats.word_reduction }} words</span>
                </div>
                <div class="stat-item">
                    <strong>Reduction:</strong> <span class="reduction">{{ stats.reduction_percentage }}%</span>
                </div>
                <div class="stat-item">
                    <strong>Readability Score:</strong> 
                    <span class="improvement">{{ stats.original_readability }} → {{ stats.simplified_readability }}</span>
                </div>
            </div>
        {% endif %}

        <div class="examples">
            <h3 style="color:#fff">Example Legal Texts</h3>
            <div class="example-card" onclick="document.querySelector('textarea[name=\"original_text\"]').value=this.querySelector('.example-text').textContent">
                <strong>Contract Clause:</strong>
                <div class="example-text" style="display: none;color=#000">
                    The parties hereto hereby mutually agree and covenant that notwithstanding any provisions contained herein to the contrary, in the event that either party shall fail to perform any of its obligations pursuant to this Agreement, the non-defaulting party shall be entitled to seek specific performance and/or injunctive relief in addition to any other remedies available at law or in equity.
                </div>
                <p>"The parties agree that if either fails to meet their obligations, the other can seek court orders to enforce the agreement..."</p>
            </div>

            <div class="example-card" onclick="document.querySelector('textarea[name=\"original_text\"]').value=this.querySelector('.example-text').textContent">
                <strong>Legal Notice:</strong>
                <div class="example-text" style="display: none; ">
                    Pursuant to Section 138 of the Negotiable Instruments Act, 1881, you are hereby notified that the cheque numbered [Cheque Number] drawn on [Bank Name] bearing date [Date] for an amount of ₹[Amount] has been dishonored by the bank due to insufficient funds. You are hereby called upon to pay the said amount within 15 days from the receipt of this notice, failing which appropriate legal proceedings shall be initiated against you without further notice.
                </div>
                <p>"Your check bounced due to lack of funds. Please pay the amount within 15 days or we will take legal action."</p>
            </div>
        </div>
    </div>

    <script>
        // Auto-resize textareas
        const textareas = document.querySelectorAll('textarea');
        textareas.forEach(textarea => {
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
            });
            
            // Trigger initial resize
            textarea.dispatchEvent(new Event('input'));
        });

        // Example click handlers
        document.querySelectorAll('.example-card').forEach(card => {
            card.addEventListener('click', function() {
                const text = this.querySelector('.example-text').textContent;
                document.querySelector('textarea[name="original_text"]').value = text;
                document.querySelector('textarea[name="original_text"]').dispatchEvent(new Event('input'));
            });
        });
    </script>
</body>
</html>